define("ps_live_togel",["ps_view","ps_model","ps_store","ps_window","ps_popup"],function(){"use strict";var e,t=arguments[0],i=arguments[1],n=arguments[2],o=arguments[3],s=arguments[4],c={is_page_rendered:!1,store:new n("ps_live_togel"),is_page_init:!1};return o.new_instance(function(t){e={page_info:function(){return c.store.store_exists("info")||c.store.store_update("info",{is_loading:!0}),c.store.store_fetch("info")},history:function(e){i.view_data({success:function(t){i.get_lobby(t.live_togel.gameID,e)}},["live_togel"])},live_togel_ws:function(){require(["ps_websocket"],function(t){t.subscribe("togel_lobby",function(t){e.history()})})},instance_new_window:function(e){t.open("","width="+screen.width+",height="+screen.height),s.toast.open(ps_language.get("language."+e.id),{title:ps_language.get("messages.opening_game"),type:"schedule",id:e.productID}),i.view_data({success:function(n){i.play(n.live_togel.gameID,e.productID,{success:function(e){t.redirect(e.URL)},fail:function(e){t.close()},complete:function(t){s.toast.close(e.productID)}})},fail:function(){t.close(),s.toast.close(e.productID)}},["live_togel"])}}}),{activate:function(n,o){var s=e.page_info();c.is_page_rendered?e.history():(t.render($(".ps_js-page_"+o.page),"live_togel",{replace:!1,data:{hash_info:o,page_info:s,is_init:!1,lobby:{histories:{},dealer:{},is_success:!1}},computed:{history_length:function(){return this.lobby.histories.length},remaining_time:function(){return null!=this.lobby.run?this.lobby.run.remainingTime:null}},mounted:function(){var t=this;e.history({success:function(e){c.store.store_update("info",{is_success:!0}),t.lobby=e},fail:function(e){t.lobby=e;var i=null;$.isPlainObject(e)&&(i=e.err_code),c.store.store_update("info",{is_success:!1,err_code:i})},complete:function(){c.store.store_update("info",{is_loading:!1}),i.update_page_rendered(t.hash_info.page),t.is_init=!0,e.live_togel_ws(),t.$nextTick(function(){$(t.$el).find(".ps_js-play_togel").on("click",function(){e.instance_new_window(o)})})}})}}),c.is_page_rendered=!0)}}});