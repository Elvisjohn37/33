define("ps_tangkas",["ps_view","ps_model","ps_store"],function(e,n,s){"use strict";var o={is_page_renderend:!1,store:new s("ps_tangkas")},a={page_info:function(){return o.store.store_exists("info")||o.store.store_update("info",{is_loading:!0,src:null,is_success:!1,err_code:null,dcode:null,lobby_height:null}),o.store.store_fetch("info")},open_tangkas:function(e){o.store.store_update("info",{is_loading:!0,err_code:null,dcode:null}),n.view_data({success:function(s){n.play(s.tangkas.gameID,e,{success:function(e){o.store.store_update("info",{src:e.URL,is_success:!0,err_code:null})},fail:function(e){var n=null,s=null;if($.isPlainObject(e))switch(n=e.err_code,s=e.dcode,e.dcode){case"DNR":a.open_display_name()}o.store.store_update("info",{is_success:!1,err_code:n,dcode:s})},complete:function(){o.store.store_update("info",{is_loading:!1})}})}},["tangkas"])},tangkas_ws:function(){require(["ps_websocket"],function(e){e.subscribe("resize_tangkas_lobby",function(e){o.store.store_update("info",{lobby_height:e+"px"})})})},open_display_name:function(){require(["ps_displayname"],function(e){e.open(function(){a.open_tangkas()})})}};return{activate:function(s,t){var i=a.page_info();o.is_page_rendered?a.open_tangkas(t.productID):(o.is_page_rendered=!0,a.tangkas_ws(),e.render($(".ps_js-page_"+t.page),"tangkas",{replace:!1,data:{hash_info:t,page_info:i},mounted:function(){var e=this;n.update_page_rendered(e.hash_info.page),a.open_tangkas(e.hash_info.productID),$(e.$el).on("click",".ps_js-set_display_name",a.open_display_name)}}))}}});