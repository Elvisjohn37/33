define("ps_game_window",["ps_view","ps_model","ps_date","ps_websocket","ps_helper","jquery"],function(){var e=arguments[0],a=arguments[1],n=arguments[2],i=arguments[3],o=arguments[4],_={is_page_rendered:!1},d={window_close:function(e){o.is_popup()?window.close():window.location=e.site.base_url}};return{activate:function(t,s){o.disable_window_manipulation();var w=$(".ps_js-page_"+s.page);0==_.is_page_rendered&&(_.is_page_rendered=!0,a.view_data({success:function(o){window.resizeTo(screen.availWidth,screen.availHeight),o.game_window.hasOwnProperty("game_data")&&(document.title=o.game_window.game_data.gameName,$(window).on("beforeunload",function(){!0===o.game_window.result&&a.game_window_closed({game_token:o.game_window.token,gameID:o.game_window.game_data.gameID,cid:o.user.id})})),i.subscribe("ps_game_close",function(e){e===o.game_window.token&&d.window_close(o)}),e.render(w,"game_window",{replace:!1,data:{hash_info:s,last_game_open:null,view_data:o,timestamp:n.get_current_date("mm/dd/yy HHH:iii gg")},mounted:function(){var e=this;$(e.$el).on("click",".ps_js-games_window_back",function(){d.window_close(o)}),a.update_page_rendered(e.hash_info.page)}})}},["game_window","site","user"]))},deactivate:function(){o.disable_window_manipulation()}}});