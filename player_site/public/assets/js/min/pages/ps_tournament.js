define("ps_tournament",["ps_view","ps_store","ps_model"],function(e,n,t){var s={is_page_rendered:!1,store:new n("ps_tournament")},a={page_info:function(){return s.store.store_exists("info")||s.store.store_update("info",{is_loading:!0,phase_loading:!0,phase_requested:{}}),s.store.store_fetch("info")},load_pagess:function(){var e=this;t.view_data({success:function(){t.tournament_details({success:function(n){e.tournament=n;for(var t=0;t<n.phases.length;t++){n.phases[t].isActive}},complete:function(){e.$nextTick(function(){$(e.$el).find(".ps_tournament-phase_no").on("click",function(){a.phase_rank($(this).attr("data-pid"))})})}}),t.update_page_rendered(e.hash_info.page),e.is_init=!0}})},get_phase_ranks:function(e,n){t.get_phase_ranks(e,{success:n})}};return{activate:function(n,i){var _=a.page_info();s.is_page_rendered||(s.is_page_rendered=!0,e.render($(".ps_js-page_"+i.page),"tournament",{replace:!1,data:{hash_info:i,page_info:_,is_init:!1,tournament:{},phase_rank:{},active_phase:null,selected_phase:null,pending_rank:null,phases_lengths:0},computed:{phases_length:function(){var e=this;return e.tournament[e.selected_phase].data.length},pending_phase:function(){var e=this;return!e.pending_rank||!e.selected_phase||e.pending_rank.phaseNo!=e.selected_phase},display_date:function(){var e=this;if(e.is_init)return e.tournament[e.selected_phase].displayDate},phase_status:function(){return"phase_status"}},watch:{selected_phase:function(){var e=this;a.get_phase_ranks(e.selected_phase)}},mounted:function(){var e=this;t.view_data({success:function(){t.tournament_details({success:function(n){e.tournament=n;for(var s=1;s<=n.length;s++){var i=n[s];1==i.isActive&&(null==e.selected_phase?(e.selected_phase=i.phaseNo,a.get_phase_ranks(i.phaseNo,function(e){})):e.pending_rank=i),2==i.isActive&&(null==e.pending_rank?e.pending_rank=i:i.disabled=!0)}t.update_page_rendered(e.hash_info.page),e.is_init=!0,e.$nextTick(function(){$(e.$el).find(".ps_tournament-phase_no").on("click",function(){e.selected_phase=$(this).attr("data-pid")})})}})}},["user"])}}))}}});