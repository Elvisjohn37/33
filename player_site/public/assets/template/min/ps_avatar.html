<div class='ps_js-avatar' data-custom-tags='image,form'><div data-tag='primary' class='ps_avatar-primary_profile ps_avatar-image'><ps-image-lazy v-bind:src='shared.rso.avatar_ext + shared.user.avatar_filename' v-bind:data-default="shared.rso.assets + 'images/ps_avatar/default.jpg'"></ps-image-lazy></div><div data-tag='primary-edit' class='ps_avatar-primary_edit'><ps-avatar-primary></ps-avatar-primary><ps-form-button class='ps_js-avatar_edit ps_avatar-edit_button'><i class='ps_icon md-create'></i></ps-form-button></div><span data-tag='selector'></span></div><div class='ps_js-avatar_modal' data-custom-tags='image,form,avatar,indicator'><ps-indicator-loader v-if='is_loading'></ps-indicator-loader><template v-else><div class='ps_avatar-main_row'><div v-bind:class="'ps_avatar-image_container ps_avatar-active_'+selected"><div v-for='avatar in formatted_list' v-bind:class="[{'ps_avatar-primary': avatar.raw.isActive},{'ps_avatar-active': avatar.raw.imgOrder == selected},'ps_avatar-image ps_js-avatar_image ps_avatar-image_no_'+avatar.raw.imgOrder]" v-bind:data-order='avatar.raw.imgOrder' v-bind:key='avatar.raw.imgOrder'><ps-image-lazy v-bind:src='shared.rso.avatar_ext + avatar.raw.filename' v-bind:data-default="shared.rso.assets + 'images/ps_avatar/default.jpg'"></ps-image-lazy><div v-bind:class="'ps_avatar-status_view ps_avatar-status_view_'+avatar.status_text"><div class='ps_avatar-icon'><i v-bind:class="'ps_icon ps_avatar-icon_'+avatar.status_text"></i></div></div><i v-if='avatar.raw.isActive' class='ps_avatar-primary_icon ps_icon md-done'></i></div></div><div class='ps_avatar-form_container'><div v-bind:class="'ps_avatar-description_container ps_avatar-active_status_'+formatted_list[selected].status_text"><div class='ps_avatar-description_title' v-if='selected == 1'>{{ shared.lang.language.primary }}</div><div class='ps_avatar-description_title' v-if='selected == 2'>{{ shared.lang.language.secondary }}</div><div class='ps_avatar-description_title' v-if='selected == 3'>{{ shared.lang.language.tertiary }}</div><div class='ps_avatar-description'>{{ shared.lang.messages[formatted_list[selected].status_text + '_avatar'] }}</div></div><div class='ps_avatar-form'><ps-form-root><ps-form-button-file name='ps_js-avatar_upload' accept='image/*' v-bind:disabled='!formatted_list[selected].can_upload'><i class='ps_icon md-publish'></i> {{ shared.lang.language.upload_photo }}</ps-form-button-file><ps-form-button class='ps_js-avatar_open_webcam' type='button' v-bind:disabled='!formatted_list[selected].can_upload'><i class='ps_icon md-photo_camera'></i> {{ shared.lang.language.take_webcam }}</ps-form-button><ps-form-button class='ps_js-avatar_set_profile ps_avatar-set_profile' type='button' v-bind:disabled='!formatted_list[selected].can_set_primary'><i class='ps_icon md-done'></i> {{ shared.lang.language.set_profile_avatar }}</ps-form-button></ps-form-root></div></div></div><div class='ps_avatar-rules'><i class='ps_icon md-error_outline'></i><div class='ps_avatar-rules_text' v-html='shared.lang.messages.avatar_rules'></div></div></template></div><div class='ps_js-avatar_crop_modal ps_avatar-crop_body' data-custom-tags='indicator,image,form'><div v-bind:class="[{ 'ps_avatar-crop_loaded': final_percent>=100}, {'ps_avatar-from_camera': is_camera },'ps_avatar-crop_wrap']"><div class='ps_avatar-loading_bar ps_avatar-reading_image'><ps-indicator-loading-bar v-bind:percent='final_percent'></ps-indicator-loading-bar><div class='ps_avatar-loading_text'>{{ shared.lang.messages.reading_image }}: {{ final_percent }}%</div></div><div v-if='uploading>0' class='ps_avatar-loading_bar ps_avatar-uploading_image'><ps-indicator-loading-bar v-bind:percent='uploading'></ps-indicator-loading-bar><div class='ps_avatar-loading_text'>{{ shared.lang.messages.uploading_image }}: {{ uploading }}%</div></div><ps-form-root v-bind:class="[{'ps-invisible': final_percent<100}, 'ps_js-avatar_crop_form']"><ps-form-input type='hidden' name='ps_img_order' v-bind:value='imgOrder' class='ps_js-imgOrder'></ps-form-input><div class='ps_avatar-modal_action_buttons'><div class='ps_avatar-modal_buttons_wrapper'><ps-form-button type='submit'><i class='ps_icon md-done'></i> {{ shared.lang.language.save }}</ps-form-button><ps-form-button class='ps_js-crop_cancel ps_components-secondary'><i class='ps_icon md-clear'></i> {{ shared.lang.language.close }}</ps-form-button><ps-form-button v-if='is_camera' class='ps_js-crop_retake ps_avatar-crop_retake ps_components-secondary'><i class='ps_icon md-photo_camera'></i> {{ shared.lang.language.retake }}</ps-form-button></div></div><div class='ps_avatar-crop_tool' v-if='final_percent>=100'><ps-image-crop v-bind:src='file_base64' name='ps_img_base64'></ps-image-crop></div></ps-form-root></div></div><div class='ps_js-avatar_webcam_modal ps_avatar-webcam_body' data-custom-tags='media,form'><div class='ps_avatar-webcam_tool'><ps-media-webcam v-bind:active='is_active'></ps-media-webcam></div><div class='ps_avatar-modal_action_buttons'><div class='ps_avatar-modal_buttons_wrapper'><ps-form-button class='ps_js-avatar_capture'><i class='ps_icon md-camera'></i> {{ shared.lang.language.capture }}</ps-form-button><ps-form-button class='ps_js-avatar_webcam_cancel ps_components-secondary'><i class='ps_icon md-clear'></i> {{ shared.lang.language.close }}</ps-form-button></div></div></div>